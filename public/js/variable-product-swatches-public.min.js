!function(t,e,i,a){"use strict";function s(e,i){this.element=e,this.settings=t.extend({},{},i),this.$element=t(e),this.$element.addClass("variable-product-swatches-loaded"),this.product_variations=this.$element.data("product_variations")||[],this.option=_VPS.option,this.is_ajax_variation=this.product_variations.length>0,this.init(),this.update(),this.tooltip(),this.stockcount(),this.selected()}t.extend(s.prototype,{init:function(){this.$element.find("ul.swatches-items-wrapper").each((function(e,i){var a=t(this).siblings("select.variable-product-swatches-raw-select");t(this).on("click.variable-product-swatches","li",(function(e){e.preventDefault(),e.stopPropagation();var i=t(this).data("value");_VPS.option.advanced.clear_on_reselect&&a.val()&&a.val()===i?a.val(""):a.val(i),a.trigger("change"),a.trigger("click"),a.trigger("focusin")}))}))},update:function(){this.$element.on("woocommerce_variation_has_changed.variable-product-swatches",(function(e){t(this).find("ul.swatches-items-wrapper").each((function(e,i){var a=t(this).siblings("select.variable-product-swatches-raw-select"),s=t(this).find("li"),n=0===a.find("option:selected").length?a.find("option").eq(1).val():a.find("option:selected").val(),c=a.find("option"),o=a.find("option:disabled"),h=[];c.each((function(){""!==t(this).val()&&h.push(t(this).val())}));var l=[];o.each((function(){""!==t(this).val()&&l.push(t(this).val())}));var r=_.difference(h,l);s.each((function(e,i){var a=t(this).attr("data-value");t(this).removeClass("swatch-item-selected").addClass("swatch-item-disabled"),_.includes(r,a)&&(t(this).removeClass("swatch-item-selected swatch-item-disabled"),a===n&&t(this).addClass("swatch-item-selected"))}))}))}))},tooltip:function(){"on"==_VPS.option.advanced.tooltip&&this.$element.find("ul.swatches-items-wrapper").each((function(e,i){t(this).find("li.swatch-item").each((function(e,i){t(this).mouseover((function(){t(this).find(".swatch-item-tooltip").show()})),t(this).mouseleave((function(){t(this).find(".swatch-item-tooltip").hide()}))}))}))},stockcount:function(){if(this.is_ajax_variation){var e=this;this.$element.on("woocommerce_variation_has_changed.variable-product-swatches",(function(i){for(var a=t(this).find("ul.swatches-items-wrapper").find("li.swatch-item-selected"),s=[],n=[],c=0;c<a.length;c++)s.push(t(a[c]).data("value")),n.push(t(a[c]).parent().data("attribute_name"));t(this).find("li.swatch-item").each((function(i,a){for(var c=t(this).data("value"),o=t(this).parent().data("attribute_name"),h=0,l=0;l<e.product_variations.length;l++){var r=e.product_variations[l],d=r.attributes,u=r.stock_quantity,f=e.checkemptykey(d);if(d[o]==c||!d[o]){for(var p=0;p<s.length;p++)!1===Object.values(d).includes(s[p])&&n[p]!==o&&d[o]&&!f.length&&(u=0),f&&(f.includes(n[p])||!1===Object.values(d).includes(s[p])&&n[p]!==o&&(u=0));h+=u}}t(this).find(".swatch-item-stock-count").text(h+" left")}))}))}},selected:function(){"on"==_VPS.option.advanced.show_selected_variation&&this.$element.on("woocommerce_variation_has_changed.variable-product-swatches",(function(e){t("body").hasClass("variable-product-swatches-show-selected-attribute")&&t(this).find("li.swatch-item").each((function(e,i){if(t(this).hasClass("swatch-item-selected")){var a=t(this).data("title");0===t(this).parents("tr").find("td.label > .selected-attribute, th.label > .selected-attribute").length&&t(this).parents("tr").find("td.label, th.label").append('<span class="selected-attribute"></span>'),t(this).parents("tr").find("td.label > .selected-attribute, th.label > .selected-attribute").text(" "+_VPS.option.advanced.label_separator+" "+a)}0==t(this).parent().find(".swatch-item-selected").length&&t(this).parents("tr").find("td.label > .selected-attribute, th.label > .selected-attribute").remove()}))}))},checkemptykey:function(t){var e=[];for(const[i,a]of Object.entries(t))a||e.push(i);return e}}),t.fn.VPS=function(e){return this.each((function(){t.data(this,"FN_VPS")||t.data(this,"FN_VPS",new s(this,e))}))}}(jQuery,window,document),function(t){"use strict";t(document).on("wc_variation_form.variable-product-swatches",".variations_form:not(.variable-product-swatches-loaded)",(function(e){t(this).VPS()}))}(jQuery);